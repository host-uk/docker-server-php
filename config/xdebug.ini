; ============================================================
; Xdebug Configuration for Development
; ============================================================

[xdebug]
; Enable xdebug extension
zend_extension=xdebug.so

; Mode: develop,debug,coverage,profile,trace
; - develop: Enhanced var_dump, stack traces
; - debug: Step debugging (IDE integration)
; - coverage: Code coverage for PHPUnit
; - profile: Profiling (generates cachegrind files)
; - trace: Function trace logging
xdebug.mode=${XDEBUG_MODE:-develop,debug,coverage}

; IDE connection settings
xdebug.client_host=${XDEBUG_CLIENT_HOST:-host.docker.internal}
xdebug.client_port=${XDEBUG_CLIENT_PORT:-9003}

; Start debugging automatically or on trigger
; - yes: Always start debugging
; - no: Never start (use trigger)
; - trigger: Start when XDEBUG_TRIGGER cookie/env/GET param is set
xdebug.start_with_request=${XDEBUG_START_WITH_REQUEST:-trigger}

; Trigger value (leave empty to accept any value)
xdebug.trigger_value=

; IDE key for identifying debug sessions
xdebug.idekey=${XDEBUG_IDEKEY:-PHPSTORM}

; Discover client host from HTTP headers (for Docker)
xdebug.discover_client_host=${XDEBUG_DISCOVER_CLIENT_HOST:-false}

; Logging
xdebug.log=${XDEBUG_LOG:-/tmp/xdebug.log}
xdebug.log_level=${XDEBUG_LOG_LEVEL:-3}

; Output settings
xdebug.cli_color=1
xdebug.var_display_max_children=128
xdebug.var_display_max_data=512
xdebug.var_display_max_depth=5

; Profiler settings (when mode=profile)
xdebug.output_dir=/tmp
xdebug.profiler_output_name=cachegrind.out.%p.%r

; Trace settings (when mode=trace)
xdebug.trace_output_name=trace.%c.%p

; Coverage settings
xdebug.use_compression=false
